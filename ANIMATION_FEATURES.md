# 用电总览数字动画功能实现

## 功能概述

为"用电总览"模块中的每个数字添加了从0到实际数值的流畅动画效果，营造动态数据加载的视觉冲击。

## 实现的功能

### 1. 智能动画时长调整
- **小数值** (< 1): 800ms 快速完成
- **中等数值** (1-10): 1200ms 适中时长
- **大数值** (10-100): 1800ms 稍长过程
- **超大数值** (> 100): 最多2500ms，避免过于拖沓

### 2. 弹性动画效果
- 使用 `easeOutBounce` 缓动函数
- 接近目标值时自动减速
- 避免机械感，提供自然的动画体验

### 3. 错峰动画启动
- 每个数字卡片有不同的延迟启动时间
- 创造波浪式的视觉冲击效果
- 延迟时间：0ms, 200ms, 400ms, 600ms, 800ms

### 4. 视觉增强效果
- 数字增长时的轻微缩放效果 (1.02x)
- 卡片进入时的滑入动画
- 数字增长时的微光扫过效果
- 暗夜模式适配

## 技术实现

### 核心组件

1. **useAnimatedNumber Hook** (`src/hooks/useAnimatedNumber.ts`)
   - 处理数字动画逻辑
   - 智能调整动画时长
   - 支持多种缓动函数
   - 提供动画状态管理

2. **AnimatedNumber 组件** (`src/components/AnimatedNumber.tsx`)
   - 渲染带动画的数字
   - 支持前缀、后缀、单位
   - 可配置精度和样式
   - 动画完成回调

3. **Overview 组件更新** (`src/components/Overview.tsx`)
   - 集成 AnimatedNumber 组件
   - 保持原有功能完整性
   - 添加动画配置参数

### CSS 动画样式

- 数字脉冲动画 (`numberPulse`)
- 卡片滑入动画 (`statCardSlideIn`)
- 微光扫过效果 (`shimmer`)
- 响应式动画适配

## 使用方式

动画会在以下情况下自动触发：
1. 页面首次加载时
2. 数据刷新时
3. 组件重新渲染时

## 性能优化

- 使用 `requestAnimationFrame` 确保流畅动画
- 智能时长调整避免不必要的长时间动画
- 组件卸载时自动清理动画资源
- 支持动画中断和重新开始

## 浏览器兼容性

- 支持现代浏览器
- 使用 CSS3 动画和 JavaScript 动画结合
- 优雅降级：不支持动画的浏览器显示静态数字

## 自定义配置

可以通过以下参数自定义动画行为：

```typescript
<AnimatedNumber
  value={number}
  duration={2000}        // 动画时长
  easing="easeOutBounce" // 缓动函数
  delay={200}            // 延迟启动
  precision={2}          // 小数位数
/>
```

## 效果展示

当用户进入页面时，会看到：
1. 卡片依次滑入
2. 数字从0开始增长
3. 不同数值有不同的增长速度
4. 接近目标值时带有弹性效果
5. 整体营造出动态数据加载的视觉冲击
